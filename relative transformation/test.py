import cv2
import numpy as np

'''inverseZ = np.matrix("(1,0,0;0,1,0;0, 0, -1")

webcamR = np.matrix("-0.97611767, -0.20420735, -0.0741192; 0.19695649, -0.97582847, 0.09469387; -0.09166481, 0.0778341, 0.99274338")
webcamR = inverseZ * webcamR * inverseZ
webcamT = np.matrix("0.14392581;0.01830396;0.41370867")
print "webcam T"
print webcamT

kinectR = np.matrix("-9.99977817e-01, 1.32412665e-03, 6.52776537e-03; 2.38760727e-04, -9.72284965e-01, 2.33798823e-01; 6.65642738e-03, 2.33795195e-01, 9.72263081e-01")
kinectT = np.matrix("0.08637103;0.00778231;0.41822541")
kinectR = inverseZ * kinectR * inverseZ
print "kinect T"
print kinectT
relativeT  = webcamT - kinectT
print "relative T"
print relativeT
relativeR = webcamR * kinectR.I
print relativeR * kinectR
'''

RT = np.matrix("0.9999912,0.002961545,0.003110713,0.001025194;-0.002973555,0.9999886,0.003863728,0.006201087;-0.003099233,-0.003872943,0.9999882,-0.00300062; 0, 0, 0, 1")   
TransformationMatrix = np.matrix("9.753417881050284732e-01,1.809856959363389806e-01,-1.263035154145257521e-01, 5.755477999999998595e-02;-1.976261021223419678e-01,9.709696908508227420e-01,-1.347656273538518912e-01, 1.052165000000000045e-02;9.824623471163256017e-02,1.564034223796099132e-01,9.827948157642649729e-01, -4.516740000000019073e-03;0,0,0,1")


kinectR = np.matrix("0.9999912,0.002961545,0.003110713;-0.002973555,0.9999886,0.003863728;-0.003099233,-0.003872943,0.9999882")
relativeR = np.matrix("9.753417881050284732e-01,1.809856959363389806e-01,-1.263035154145257521e-01;-1.976261021223419678e-01,9.709696908508227420e-01,-1.347656273538518912e-01;9.824623471163256017e-02,1.564034223796099132e-01,9.827948157642649729e-01")

R = relativeR * kinectR

kinectT = np.matrix("0.001025194;0.006201087;-0.00300062")
webcamT = np.matrix("5.755477999999998595e-02;1.052165000000000045e-02;-4.516740000000019073e-03")

T = kinectT + webcamT

np.savetxt('rotation.txt', R, delimiter=',')
np.savetxt('translation.txt', T, delimiter=',')